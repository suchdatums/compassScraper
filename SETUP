#!/bin/bash -i
cd "${0%/*}"
# one-click install..., ya bish?



# TODO can we safely assume we don't need this?
# cd ~
echo "===================================="
echo "INSTALLER SCRIPT FOR COMPASS SCRAPER"



# SYSTEM INSTALL
###################
cmds="
sudo apt update -y
sudo apt upgrade -y

sudo apt-get install chromium-chromedriver
"
asktoinstall "$cmds"




# MAC ONLY
echo
echo "if running on Mac OS..."
###################
cmds="
python3 -m pip install --upgrade pip
"
asktoinstall "$cmds"



# PYTHON
###################
cmds="
python3 -m venv venv
. venv/bin/activate
pip install bs4 selenium lxml requests
pip3 install webdriver_manager
"
asktoinstall "$cmds"



# WE DON'T NEED THIS ANYMORE BECAUSE GETREPO CHANGES PERMISSIONS <3
#chmod +x run




# RUN SETUP OTHER SCRIPTS
echo
echo "set alert email address?"
###################
cmds="
python3 setup_toList.py
"
asktoinstall "$cmds"



echo
echo "NOW, SETUP CRONTAB:"
echo
echo "crontab -e"
echo
echo "...paste in this:"
# TODO CLUNKLY... DON'T HARD CODE SHIT
echo "0 * * * * /home/pi/compassScraper/run"
